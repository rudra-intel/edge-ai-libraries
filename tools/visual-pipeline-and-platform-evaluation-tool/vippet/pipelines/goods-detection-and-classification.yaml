name: Goods Detection & Classification
definition: >
  The Retail Pipeline using YOLO 11n for object detection and EfficientNet B0 for classification is designed for retail analytics applications.
  It detects various retail-related objects and classifies them into specific categories, making it suitable for inventory management, customer behavior analysis, and other retail use cases.
tags:
  - Retail
thumbnail: images/goods-detection-and-classification.png
variants:
  - name: CPU
    pipeline_description: >-
      filesrc location=/videos/input/obj_classification.mp4 !
      decodebin3 !
      gvadetect
        batch-size=1
        model-instance-id=detect0-cpu
        model=/models/output/public/yolo11n/FP16/yolo11n.xml
        threshold=0.5
        inference-interval=3
        scale-method=fast
        device=CPU
        pre-process-backend=opencv
        ie-config=CPU_THROUGHPUT_STREAMS=2
        nireq=2 !
      queue !
      gvatrack tracking-type=zero-term-imageless !
      queue !
      gvaclassify
        batch-size=1
        model-instance-id=classify0-cpu
        labels=/home/dlstreamer/dlstreamer/samples/labels/imagenet_2012.txt
        model=pipeline-zoo-models/efficientnet-b0_INT8/FP16-INT8/efficientnet-b0.xml
        model-proc=/home/dlstreamer/dlstreamer/samples/gstreamer/model_proc/public/preproc-aspect-ratio.json
        device=CPU
        inference-region=roi-list
        pre-process-backend=opencv
        ie-config=CPU_THROUGHPUT_STREAMS=2
        nireq=2
        reclassify-interval=1 !
      gvafpscounter starting-frame=100 !
      gvawatermark !
      gvametaconvert !
      queue !
      gvametapublish file-format=json-lines file-path=/dev/null !
      fakesink name=default_output_sink sync=false async=false
  - name: GPU
    pipeline_description: >-
      filesrc location=/videos/input/obj_classification.mp4 !
      decodebin3 !
      gvadetect
        batch-size=1
        model-instance-id=detect0-gpu
        model=/models/output/public/yolo11n/FP16/yolo11n.xml
        threshold=0.5
        inference-interval=3
        scale-method=fast
        device=GPU
        pre-process-backend=va-surface-sharing
        ie-config=GPU_THROUGHPUT_STREAMS=2
        nireq=2 !
      queue !
      gvatrack tracking-type=zero-term-imageless !
      queue !
      gvaclassify
        batch-size=1
        model-instance-id=classify0-gpu
        labels=/home/dlstreamer/dlstreamer/samples/labels/imagenet_2012.txt
        model=pipeline-zoo-models/efficientnet-b0_INT8/FP16-INT8/efficientnet-b0.xml
        model-proc=/home/dlstreamer/dlstreamer/samples/gstreamer/model_proc/public/preproc-aspect-ratio.json
        device=GPU
        inference-region=roi-list
        pre-process-backend=va-surface-sharing
        ie-config=GPU_THROUGHPUT_STREAMS=2
        nireq=2
        reclassify-interval=1 !
      gvafpscounter starting-frame=100 !
      gvawatermark !
      gvametaconvert !
      queue !
      gvametapublish file-format=json-lines file-path=/dev/null !
      fakesink name=default_output_sink sync=false async=false
  - name: NPU
    pipeline_description: >-
      filesrc location=/videos/input/obj_classification.mp4 !
      decodebin3 !
      gvadetect
        batch-size=1
        model-instance-id=detect0-npu
        model=/models/output/public/yolo11n/FP16/yolo11n.xml
        threshold=0.5
        inference-interval=3
        scale-method=fast
        device=NPU
        pre-process-backend=va
        nireq=4 !
      queue !
      gvatrack tracking-type=zero-term-imageless !
      queue !
      gvaclassify
        batch-size=1
        model-instance-id=classify0-npu
        labels=/home/dlstreamer/dlstreamer/samples/labels/imagenet_2012.txt
        model=pipeline-zoo-models/efficientnet-b0_INT8/FP16-INT8/efficientnet-b0.xml
        model-proc=/home/dlstreamer/dlstreamer/samples/gstreamer/model_proc/public/preproc-aspect-ratio.json
        device=NPU
        inference-region=roi-list
        pre-process-backend=va
        nireq=4
        reclassify-interval=1 !
      gvafpscounter starting-frame=100 !
      gvawatermark !
      gvametaconvert !
      queue !
      gvametapublish file-format=json-lines file-path=/dev/null !
      fakesink name=default_output_sink sync=false async=false
  - name: GPU_NPU
    pipeline_description: >-
      filesrc location=/videos/input/obj_classification.mp4 !
      decodebin3 !
      gvadetect
        batch-size=1
        model-instance-id=detect0-gpu-npu
        model=/models/output/public/yolo11n/FP16/yolo11n.xml
        threshold=0.5
        inference-interval=3
        scale-method=fast
        device=GPU
        pre-process-backend=va-surface-sharing
        ie-config=GPU_THROUGHPUT_STREAMS=2
        nireq=2 !
      queue !
      gvatrack tracking-type=zero-term-imageless !
      queue !
      gvaclassify
        batch-size=1
        model-instance-id=classify0-gpu-npu
        labels=/home/dlstreamer/dlstreamer/samples/labels/imagenet_2012.txt
        model=pipeline-zoo-models/efficientnet-b0_INT8/FP16-INT8/efficientnet-b0.xml
        model-proc=/home/dlstreamer/dlstreamer/samples/gstreamer/model_proc/public/preproc-aspect-ratio.json
        device=NPU
        inference-region=roi-list
        pre-process-backend=va
        nireq=4
        reclassify-interval=1 !
      gvafpscounter starting-frame=100 !
      gvawatermark !
      gvametaconvert !
      queue !
      gvametapublish file-format=json-lines file-path=/dev/null !
      fakesink name=default_output_sink sync=false async=false

