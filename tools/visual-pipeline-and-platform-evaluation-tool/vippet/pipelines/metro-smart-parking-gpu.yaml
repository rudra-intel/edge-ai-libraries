# Reference: This is the official reference for Smart Parking pipeline
# https://github.com/open-edge-platform/edge-ai-suites/tree/main/metro-ai-suite/metro-vision-ai-app-recipe/smart-parking
name: Metro - Smart Parking [GPU]
version: 1
definition: >
  Smart Parking is a cloud-native, microservices-based video analytics pipeline that uses pre-trained deep learning models to detect parking-space occupancy.
pipeline_description: "filesrc location=/videos/input/metro_smart_parking.mp4 ! parsebin ! vah264dec ! vapostproc ! video/x-raw(memory:VAMemory) ! gvadetect model=/models/output/public/yolo11s/FP16/yolo11s.xml pre-process-backend=va-surface-sharing device=GPU batch_size=8 inference-region=0 inference-interval=1 nireq=2 threshold=0.7 model-instance-id=instgpu0 ! queue ! gvaclassify batch-size=8 model=/models/output/public/colorcls2/colorcls2.xml pre-process-backend=va-surface-sharing device=GPU inference-interval=1 inference-region=1 nireq=2 model-instance-id=instgpu1 ! queue ! gvawatermark ! gvametaconvert add-empty-results=true ! queue ! gvafpscounter starting-frame=100 ! fakesink name=default_output_sink"
